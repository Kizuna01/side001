<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>產品介紹detail</title>
    <link rel="stylesheet" href="bootstrap-4.6.2-dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="carasol/owl.carousel.min.css">  
    <link rel="stylesheet" href="css/bootstrap-icons-1.11.3/font/bootstrap-icons.css"><!--bi 圖示庫->安裝 載點 :https://github.com/twbs/icons/releases/tag/v1.11.3-->
    <link rel="stylesheet" href="css/fontawesome-free-6.7.1/css/all.css" rel="stylesheet"><!-- icon: fa-->
    <!-- fontawesome CSS -->
    <link href="fontawesome-free-6.6.0-web/css/all.css" rel="stylesheet">
    <link href="css/fontawesome-free-6.7.1/css/all.css" rel="stylesheet">
    <link href="css/public_se.css" rel="stylesheet">
    <style>
   
    </style>
</head>

<body>
    <div class="row my-1 px-lg-5">
        <!-- 顯示主圖片 -->
        <div class="col-xl-5 col-lg-5 col-md-5 text-center">
            <!--第一張圖-->
            <div class="col-md-12 mb-3">
                <img class="img-fluid w-100 img-thumbnail zoom_all" src="img/bear.jpg" data-zoom-image="img/bear.jpg"
                    alt="圖檔名稱：1" id="prod_detail_image_main"><br>
            </div>

            <!-- 顯示所有圖片(小) -->
            <div class="carousel-wrapper d-none d-lg-block">
                <div class="image-carousel-container">
                    <div class="image-carousel" style="transform: translateX(0px);">
                        <div class="image-slide">
                            <div class="image-container">
                                <img class="img-fluid img-thumbnail" src="img/bear.jpg" alt="圖檔名稱：1"
                                    onclick="updateMainImage(this);" style="cursor: pointer;">
                            </div>
                        </div>
                        <div class="image-slide">
                            <div class="image-container">
                                <img class="img-fluid img-thumbnail" src="img/bear2.jpg" alt="圖檔名稱：1"
                                    onclick="updateMainImage(this);" style="cursor: pointer;">
                            </div>
                        </div>
                    </div>
                </div>
                <button class="carousel-control-prev" onclick="prevSlide()">❮</button>
                <button class="carousel-control-next" onclick="nextSlide()">❯</button>
            </div>
        </div>
        <div class="col-md-7 my-1">
            <h2>三層角落架</h2>
            <h3 class="ml-3 text-dark-primary">產品型號: 三層角落架</h3>
            <div class="col-md-12 my-1">
                <div id="prodInfoDiv">
                    <div id="prodInfoTitle">產品簡述</div>
                    <div id="prodInfo">
                        <h3 style="font-size: 18px;">
                            <ul>
                                <li>適用場所：浴室、廚房、牆角</li>
                                <li>產品材質：鐵材, 電鍍</li>
                                <li>產品產地：台灣</li>
                            </ul>
                        </h3>
                    </div>
                    <hr>
                    <!--foreach-->
                    <div class="form-check mb-2">
                        <a href="javascript:void(0)" class="titleHover" data-img="img/bear.jpg">
                            可愛熊熊
                        </a>
                        <div>
                            <div class="s20c_mold">
                                價格:$100
                            </div>
                            <div class="h_hr"></div>
                            
                            數量:&nbsp<input type="number" id="num<!--- $item.IID --->" style="width:20%" min="1" value="1">
                            &nbsp
                            <button type="button" class="btn btn-info add_query_btn<!--- $item.IID --->"
                                data-iid="<!--- $item.IID --->" data-title="<!--- $data.TITLE --->"
                                data-price="<!--- $item.PD_PRICE --->" data-quantity="1"
                                data-size="<!--- $item.PD_SIZE --->" data-mat="<!--- $item.PD_MAT --->"
                                data-color="<!--- $item.PD_COLOR --->" onclick="cart.add(<!--- $item.IID --->);">
                                <i class="bi bi-currency-dollar "></i> 訂購
                            </button>
                        </div>
                    </div>
                    <div class="form-check mb-2">
                        <a href="javascript:void(0)" class="titleHover" data-img="img/bear2.jpg">
                            可愛熊熊2
                        </a>
                        <div>
                            <div class="s20c_mold">
                                價格:$100
                            </div>
                            <div class="h_hr"></div>
                            
                            數量:&nbsp<input type="number" id="num<!--- $item.IID --->" style="width:20%" min="1" value="1">
                            &nbsp
                            <button type="button" class="btn btn-info add_query_btn<!--- $item.IID --->"
                                data-iid="<!--- $item.IID --->" data-title="<!--- $data.TITLE --->"
                                data-price="<!--- $item.PD_PRICE --->" data-quantity="1"
                                data-size="<!--- $item.PD_SIZE --->" data-mat="<!--- $item.PD_MAT --->"
                                data-color="<!--- $item.PD_COLOR --->" onclick="cart.add(<!--- $item.IID --->);">
                                <i class="bi bi-currency-dollar "></i> 訂購
                            </button>
                        </div>
                    </div>

                    <!--/foreach-->
                    
                </div>
            </div>

            <div class="mt-5 col-9 mx-auto">
                <div class="d-flex justify-content-between align-items-center mr-lg-3">
                    <a class="btn btn-primary border-primay" title="推到Facebook"
                        href="javascript: void(window.open('http://www.facebook.com/share.php?u='.concat(encodeURIComponent(location.href)) ));">
                        <i class="bi bi-facebook h3 mb-0"></i>
                    </a>

                    <a class="btn btn-success" title="推到Line"
                        href="javascript: void(window.open('https://lineit.line.me/share/ui?url='.concat(encodeURIComponent(location.href)) ));">
                        <i class="bi bi-line h3 mb-0"></i>
                    </a>

                    <a class="btn btn-dark" title="推到Twitter"
                        href="javascript: void(window.open('http://twitter.com/home/?status='.concat(encodeURIComponent(document.title)).concat(' ').concat(encodeURIComponent(location.href))));">
                        <i class="bi bi-twitter h3 mb-0"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script src="js/jquery-3.7.0.min.js"></script>
    <script src="carasol01/owl.carousel.min.js"></script>
    <script src="js/jquery.elevatezoom.min.js"></script><!--局部放大套件-->
    <script>
        $(document).ready(function () {
            // 初始化顯示第一組圖片
            showSlide(currentIndex);
            $(".subTypeButton").click(function () {
                $(this).parent().find(".subTypeUl").toggleClass("d-none");
            });

            $(".titleHover").hover(function () {
                updateMainImage2($(this).data("img"))
            });

        });
        function updateMainImage(imgElement) {
            var mainImage = document.getElementById('prod_detail_image_main');
            mainImage.src = imgElement.src;
            // 更換放大圖片來源
            $('#prod_detail_image_main').data('zoom-image', imgElement.src);
            $('#prod_detail_image_main').elevateZoom('swapImage', imgElement.src, imgElement.src);
            // 移除原本放大圖片div
            $('.zoomContainer').remove();
            // 初始化
            $(".zoom_all").elevateZoom({
                zoomType: "window", // 放大类型，可以是 "lens", "inner", "window"
                lensShape: "square", // 放大镜形状，可以是 "round" 或 "square"
                lensSize: 100, // 放大镜尺寸
                borderSize: 1, // 放大镜边框的大小
                borderColour: "#888", // 放大镜边框的颜色
                zoomWindowWidth: 250, // 放大窗口的宽度 (仅在 window 模式下使用)
                zoomWindowHeight: 250, // 放大窗口的高度 (仅在 window 模式下使用)
                scrollZoom: true // 允许滚轮缩放
            });
        }

        function updateMainImage2(imgElement) {
            var mainImage = document.getElementById('prod_detail_image_main');
            mainImage.src = imgElement;
            // 更換放大圖片來源
            $('#prod_detail_image_main').data('zoom-image', imgElement.src);
            $('#prod_detail_image_main').elevateZoom('swapImage', imgElement.src, imgElement.src);
            // 移除原本放大圖片div
            $('.zoomContainer').remove();
            // 初始化
            $(".zoom_all").elevateZoom({
                zoomType: "window", // 放大类型，可以是 "lens", "inner", "window"
                lensShape: "square", // 放大镜形状，可以是 "round" 或 "square"
                lensSize: 100, // 放大镜尺寸
                borderSize: 1, // 放大镜边框的大小
                borderColour: "#888", // 放大镜边框的颜色
                zoomWindowWidth: 250, // 放大窗口的宽度 (仅在 window 模式下使用)
                zoomWindowHeight: 250, // 放大窗口的高度 (仅在 window 模式下使用)
                scrollZoom: true // 允许滚轮缩放
            });
        }

        let currentIndex = 0;

        function showSlide(index) {

            const slides = document.querySelectorAll('.image-slide');
            const totalSlides = slides.length;
            const visibleSlides = Math.floor(document.querySelector('.image-carousel-container').offsetWidth / (80 + 10)); // 計算可見圖片數量
            currentIndex = 0;
            if (index > totalSlides - 1) {
                // 當前索引超過最大允許值時，設置為最大可顯示索引
                currentIndex = totalSlides - 1;
            } else if (index < 0) {
                // 當前索引小於最小允許值時，設置為最小可顯示索引
                currentIndex = 0;
            } else {
                // 設置當前索引
                currentIndex = index;
            }
            const slideWidth = 80; // 圖片寬度
            const slideMargin = 10; // 圖片間距
            const offset = -currentIndex * (slideWidth + slideMargin); // 計算偏移量
            document.querySelector('.image-carousel').style.transform = `translateX(${offset}px)`;

            // 更新主圖片
            updateMainImage(slides[currentIndex].querySelector('img'));
        }

        function nextSlide() {
            console.log(currentIndex + 1)
            showSlide(currentIndex + 1);
        }

        function prevSlide() {
            showSlide(currentIndex - 1);
        }

    </script>


</body>

</html>